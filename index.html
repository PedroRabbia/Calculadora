<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Palets - El Chiro</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.freepik.es%2Fimagen-ia-premium%2Fseleccion-quesos-sobre-fondo-negro_45872993.htm&psig=AOvVaw1yN9CvQsXmrdIHlaXuTgDH&ust=1730256458989000&source=images&cd=vfe&opi=89978449&ved=0CBQQjRxqFwoTCOjaguPJsokDFQAAAAAdAAAAABAE'); /* URL de la imagen de fondo de quesos */
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #333;
            padding: 20px;
            max-width: 800px;
            margin: auto;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            background-color: rgba(255, 255, 255, 0.8); /* Fondo semi-transparente */
        }
        h1, h2 {
            text-align: center;
            color: #4CAF50;
        }
        .empleado-container {
            position: absolute;
            right: 20px;
            top: 10px;
            font-weight: bold;
            color: #333;
        }
        label, input, select {
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
        }
        input[type="number"], input[type="text"], select {
            width: calc(100% - 20px);
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        #resultado {
            margin-top: 20px;
            font-size: 1.2em;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            display: none; /* Se mostrará después del cálculo */
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>

    <h1>Calculadora de Palets</h1>
    <div class="empleado-container" id="empleadoSeleccionado">Empleado: Desconocido</div>
    <h2>Empresa: El Chiro</h2>

    <label for="empleado">Selecciona el Empleado:</label>
    <select id="empleado" required onchange="actualizarEmpleado()">
        <option value="">-- Selecciona un empleado --</option>
        <option value="Javier">Javier</option>
        <option value="Pachi">Pachi</option>
        <option value="Tatani">Tatani</option>
        <option value="Hugo">Hugo</option>
        <option value="Vale">Vale</option>
        <option value="Ramiro">Ramiro</option>
        <option value="Maxi">Maxi</option>
        <option value="Angel">Angel</option>
        <option value="Pedro">Pedro</option>
        <option value="Carlos">Carlos</option>
        <option value="Sergio">Sergio</option>
        <option value="David">David</option>
        <option value="Manuel">Manuel</option>
    </select>

    <label for="nombreCliente">Nombre del Cliente:</label>
    <input type="text" id="nombreCliente" placeholder="Ingresa el nombre del cliente" required>

    <label for="pesoInicial">Peso Inicial (kg):</label>
    <input type="number" id="pesoInicial" placeholder="Ingresa el peso inicial" required>

    <label for="pesoPalets">Peso de Palets a Restar (kg):</label>
    <input type="number" id="pesoPalets" placeholder="Ingresa el peso de los palets" required>

    <label for="tipoCaja">Selecciona el Tipo de Caja:</label>
    <select id="tipoCaja" required>
        <option value="cremoso">Caja Cremoso (0.3 kg)</option>
        <option value="barra">Caja Barra (0.4 kg)</option>
        <option value="reggiano">Caja Reggiano (0.7 kg)</option>
    </select>

    <label for="numCajas">Número de Cajas:</label>
    <input type="number" id="numCajas" placeholder="Ingresa el número de cajas" required>

    <label for="precioPorKilo">Precio por Kilo ($):</label>
    <input type="number" id="precioPorKilo" placeholder="Ingresa el precio por kilo" step="0.01" required>

    <button onclick="calcular()">Calcular</button>

    <div id="resultado"></div>
    <table id="tablaResultados">
        <thead>
            <tr>
                <th>Descripción</th>
                <th>Peso (kg)</th>
            </tr>
        </thead>
        <tbody id="resultadosBody">
            <tr>
                <td>Empleado</td>
                <td id="empleadoTabla"></td>
            </tr>
            <tr>
                <td>Cliente</td>
                <td id="nombreClienteTabla"></td>
            </tr>
            <tr>
                <td>Peso Inicial</td>
                <td id="pesoInicialTabla"></td>
            </tr>
            <tr>
                <td>Peso de Palets</td>
                <td id="pesoPaletsTabla"></td>
            </tr>
            <tr>
                <td>Peso de Cajas</td>
                <td id="pesoCajasTabla"></td>
            </tr>
            <tr>
                <td><strong>Resultado Final</strong></td>
                <td id="resultadoFinalTabla"></td>
            </tr>
            <tr>
                <td><strong>Precio Total</strong></td>
                <td id="precioTotalTabla"></td>
            </tr>
        </tbody>
    </table>

    <h3>Historial de Pesadas</h3>
    <table id="historialResultados" style="display:none;">
        <thead>
            <tr>
                <th>Empleado</th>
                <th>Cliente</th>
                <th>Peso (kg)</th>
                <th>Precio Total ($)</th>
            </tr>
        </thead>
        <tbody id="historialBody">
            <!-- Aquí se llenará el historial -->
        </tbody>
    </table>
    <div class="footer">
        <strong>Precio Total Acumulado: </strong><span id="precioTotalAcumulado">$0.00</span>
    </div>

    <h3>Calculador de Stock</h3>
    <label for="tipoProducto">Tipo de Producto:</label>
    <input type="text" id="tipoProducto" placeholder="Ingresa el tipo de producto" required>

    <label for="kilosStock">Kilos:</label>
    <input type="number" id="kilosStock" placeholder="Ingresa la cantidad de kilos" required>

    <button onclick="calcularStock()">Calcular Stock</button>

    <div id="resultadoStock" style="margin-top: 20px;"></div>

    <script>
        const historial = [];
        let precioTotalAcumulado = 0; // Variable para acumular el precio total

        function calcular() {
            const empleado = document.getElementById('empleado').value || "Desconocido";
            const nombreCliente = document.getElementById('nombreCliente').value || "Desconocido";
            const pesoInicial = parseFloat(document.getElementById('pesoInicial').value) || 0;
            const pesoPalets = parseFloat(document.getElementById('pesoPalets').value) || 0;
            const numCajas = parseFloat(document.getElementById('numCajas').value) || 0;
            const tipoCaja = document.getElementById('tipoCaja').value;
            const precioPorKilo = parseFloat(document.getElementById('precioPorKilo').value) || 0;

            // Peso por tipo de caja
            let pesoCaja;
            switch (tipoCaja) {
                case 'cremoso':
                    pesoCaja = 0.3;
                    break;
                case 'barra':
                    pesoCaja = 0.4;
                    break;
                case 'reggiano':
                    pesoCaja = 0.7;
                    break;
                default:
                    pesoCaja = 0;
            }

            const pesoTotalCajas = pesoCaja * numCajas;
            const resultado = pesoInicial - pesoPalets - pesoTotalCajas;
            const precioTotal = resultado * precioPorKilo;

            // Acumular el precio total
            precioTotalAcumulado += precioTotal;

            // Mostrar el resultado
            document.getElementById('resultado').innerText = `Resultado Final: ${resultado.toFixed(2)} kg`;
            document.getElementById('precioTotalTabla').innerText = '$' + precioTotal.toFixed(2);
            document.getElementById('empleadoTabla').innerText = empleado;
            document.getElementById('nombreClienteTabla').innerText = nombreCliente;
            document.getElementById('pesoInicialTabla').innerText = pesoInicial.toFixed(2);
            document.getElementById('pesoPaletsTabla').innerText = pesoPalets.toFixed(2);
            document.getElementById('pesoCajasTabla').innerText = pesoTotalCajas.toFixed(2);
            document.getElementById('resultadoFinalTabla').innerText = resultado.toFixed(2);

            // Agregar al historial
            historial.push({
                empleado: empleado,
                cliente: nombreCliente,
                peso: resultado.toFixed(2),
                precioTotal: precioTotal.toFixed(2)
            });

            // Actualizar el historial en la tabla
            actualizarHistorial();
            document.getElementById('tablaResultados').style.display = 'block';
            document.getElementById('historialResultados').style.display = 'table';
            document.getElementById('precioTotalAcumulado').innerText = '$' + precioTotalAcumulado.toFixed(2); // Actualizar precio total acumulado
        }

        function actualizarHistorial() {
            const historialBody = document.getElementById('historialBody');
            historialBody.innerHTML = ''; // Limpiar historial existente
            historial.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.empleado}</td>
                    <td>${entry.cliente}</td>
                    <td>${entry.peso} kg</td>
                    <td>$${entry.precioTotal}</td>
                `;
                historialBody.appendChild(row);
            });
        }

        function calcularStock() {
            const tipoProducto = document.getElementById('tipoProducto').value || "Desconocido";
            const kilos = parseFloat(document.getElementById('kilosStock').value) || 0;

            const resultadoStock = `Producto: ${tipoProducto}, Kilos: ${kilos}`;
            document.getElementById('resultadoStock').innerText = resultadoStock;
        }

        function actualizarEmpleado() {
            const empleado = document.getElementById('empleado').value || "Desconocido";
            document.getElementById('empleadoSeleccionado').innerText = 'Empleado: ' + empleado;
        }
    </script>

</body>
</html>
